{% extends "base.html" %}

{% block title %}{{ film.title }}{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-md-5">
            <img src="{{ film.poster_url }}" class="img-fluid" alt="Постер фільму">
        </div>
        <div class="col-md-7">
            <h2>{{ film.title }}</h2>
            <p>Дата: <strong>{{ show.date }}</strong></p>
            <p>Час: <strong>{{ show.time }}</strong></p>
            {% if admin %}
            <button type="button" class="btn btn-outline-primary mb-3" data-bs-toggle="modal" data-bs-target="#bookedModal">
                Заброньовані місця
            </button>
            {% endif %}
            {% if not started %}
                <h4>Виберіть місце:</h4>
                <form method="post" action="{{ url_for('book') }}">
                    <input type="hidden" name="show_id" value="{{ show.id }}">
                    <div class="mb-3">
                        <div class="seat-map">
                            {% for row in show.seats %}
                                {% set row_idx = loop.index0 %}
                                <div class="seat-row">
                                    <span class="row-label">Ряд {{ loop.index }}</span>
                                    {% for seat in row %}
                                        {% set seat_idx = loop.index0 %}
                                        {% set seat_id = row_idx ~ '-' ~ seat_idx %}
                                        {% if seat.status == 0 %}
                                            <label class="seat available">
                                                <input type="radio" name="seat" value="{{ seat_id }}" required>
                                                <span></span>
                                            </label>
                                        {% else %}
                                            <div class="seat occupied">
                                                <span></span>
                                            </div>
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            {% endfor %}
                        </div>
                    </div>
